{% extends "base.html" %}
{% block content %}

<main class="container">
  <section class="section">
    <div class="toolbar">
      <div>
        <h1 class="h1">Account</h1>
        <div class="muted">Profile UI: delivery address, personal details, password change.</div>
      </div>
      <form action="{% url 'users:logout' %}" method="post">
        {% csrf_token %}
        <button class="btn" type="submit">Logout</button>
      </form>
    </div>

    {% if messages %}
      {% for message in messages %}
        {% if "success" in message.tags %}
          <div class="form-global-success">
            {{ message }}
          </div>
          {% endif %}
      {% endfor %}
    {% endif %}
    <div class="grid cols-2">
      <div class="card pad" id="profile">
        <h3>Personal details</h3>
        <div class="spacer"></div>

        <form class="form" method="post">
          {% csrf_token %}

          <div class="two">
            {% include "components/form_field.html" with field=profile_form.first_name %}
            {% include "components/form_field.html" with field=profile_form.last_name %}
          </div>

          <div class="two">
            {% include "components/form_field.html" with field=profile_form.email %}
            {% include "components/form_field.html" with field=profile_form.phone %}
          </div>

            <!-- Order notes -->
            {% include "components/form_field.html" with field=profile_form.notes %}
            <!-- End order notes -->

          <br>
          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn primary" name="profile-submit" type="submit">Save changes</button>
            <button class="btn" type="reset">Cancel</button>
          </div>
        </form>
      </div>

      <div class="card pad" id="addresses">
        <h3>Delivery address</h3>
        <div class="spacer"></div>

        <form class="form" method="post">
          {% csrf_token %}

          <div class="two">
            {% include "components/form_field.html" with field=address_form.first_name %}
            {% include "components/form_field.html" with field=address_form.last_name %}
          </div>

          <div class="two">
            {% include "components/form_field.html" with field=address_form.email %}
            {% include "components/form_field.html" with field=address_form.phone %}
          </div>

            <!-- Street form field -->
            {% include "components/form_field.html" with field=address_form.street %}
            <!-- End street form field -->


          <div class="two">
            {% include "components/form_field.html" with field=address_form.city %}
            {% include "components/form_field.html" with field=address_form.postal_code %}
          </div>

          <div class="two">
            {% include "components/form_field.html" with field=address_form.state %}
            {% include "components/form_field.html" with field=address_form.country %}
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn primary" name="address-submit" type="submit">Add / Update address</button>
            <button class="btn" type="button">Set as default</button>
          </div>

          <div class="help">You can store multiple addresses in your real app; this is a single-address UI.</div>
        </form>
      </div>
    </div>

    <div class="spacer"></div>

    <div class="card pad" id="security">
      <div class="toolbar" style="margin-bottom:0">
        <div>
          <h3>Security</h3>
          <div class="muted">Change password UI</div>
        </div>
        <span class="pill">2FA (UI placeholder)</span>
      </div>

      <div class="spacer"></div>

      <form class="form" action="#" method="post">
        <div class="two">
          <div class="field">
            <label for="old">Current password</label>
            <input class="input" id="old" type="password" placeholder="••••••••" />
          </div>
          <div class="field">
            <label for="new">New password</label>
            <input class="input" id="new" type="password" placeholder="Min 8 characters" />
          </div>
        </div>

        <div class="field">
          <label for="repeat">Repeat new password</label>
          <input class="input" id="repeat" type="password" placeholder="Repeat new password" />
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn primary" type="button">Update password</button>
          <button class="btn" type="button" style="border-color:rgba(255,77,109,.25)">Reset via email</button>
        </div>

        <div class="help">Use secure password rules + hashing in backend. This is UI only.</div>
      </form>
    </div>
  </section>

</main>
{% endblock %}